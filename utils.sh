#!/usr/local/Cellar/bash/5.0.3/bin/bash

heading=("
                                                                                                                                  
                                                                                                                                  
                                                                       kkkkkkkk                                                   
                                                                       k::::::k                                                   
                                                                       k::::::k                                                   
                                                                       k::::::k                                                   
    ssssssssss   nnnn  nnnnnnnn        eeeeeeeeeeee    aaaaaaaaaaaaa    k:::::k    kkkkkkk eeeeeeeeeeee  yyyyyyy           yyyyyyy
  ss::::::::::s  n:::nn::::::::nn    ee::::::::::::ee  a::::::::::::a   k:::::k   k:::::kee::::::::::::ee y:::::y         y:::::y 
ss:::::::::::::s n::::::::::::::nn  e::::::eeeee:::::eeaaaaaaaaa:::::a  k:::::k  k:::::ke::::::eeeee:::::eey:::::y       y:::::y  
s::::::ssss:::::snn:::::::::::::::ne::::::e     e:::::e         a::::a  k:::::k k:::::ke::::::e     e:::::e y:::::y     y:::::y   
 s:::::s  ssssss   n:::::nnnn:::::ne:::::::eeeee::::::e  aaaaaaa:::::a  k::::::k:::::k e:::::::eeeee::::::e  y:::::y   y:::::y    
   s::::::s        n::::n    n::::ne:::::::::::::::::e aa::::::::::::a  k:::::::::::k  e:::::::::::::::::e    y:::::y y:::::y     
      s::::::s     n::::n    n::::ne::::::eeeeeeeeeee a::::aaaa::::::a  k:::::::::::k  e::::::eeeeeeeeeee      y:::::y:::::y      
ssssss   s:::::s   n::::n    n::::ne:::::::e         a::::a    a:::::a  k::::::k:::::k e:::::::e                y:::::::::y       
s:::::ssss::::::s  n::::n    n::::ne::::::::e        a::::a    a:::::a k::::::k k:::::ke::::::::e                y:::::::y        
s::::::::::::::s   n::::n    n::::n e::::::::eeeeeeeea:::::aaaa::::::a k::::::k  k:::::ke::::::::eeeeeeee         y:::::y         
 s:::::::::::ss    n::::n    n::::n  ee:::::::::::::e a::::::::::aa:::ak::::::k   k:::::kee:::::::::::::e        y:::::y          
  sssssssssss      nnnnnn    nnnnnn    eeeeeeeeeeeeee  aaaaaaaaaa  aaaakkkkkkkk    kkkkkkk eeeeeeeeeeeeee       y:::::y           
                                                                                                               y:::::y            
                                                                                                              y:::::y             
                                                                                                             y:::::y              
                                                                                                            y:::::y               
                                                                                                           yyyyyyy                
                                                                                                                                     

" " 
         _____                    _____                    _____                    _____                    _____                    _____                _____          
         /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \              |\    \         
        /::\    \                /::\____\                /::\    \                /::\    \                /::\____\                /::\    \             |:\____\        
       /::::\    \              /::::|   |               /::::\    \              /::::\    \              /:::/    /               /::::\    \            |::|   |        
      /::::::\    \            /:::::|   |              /::::::\    \            /::::::\    \            /:::/    /               /::::::\    \           |::|   |        
     /:::/\:::\    \          /::::::|   |             /:::/\:::\    \          /:::/\:::\    \          /:::/    /               /:::/\:::\    \          |::|   |        
    /:::/__\:::\    \        /:::/|::|   |            /:::/__\:::\    \        /:::/__\:::\    \        /:::/____/               /:::/__\:::\    \         |::|   |        
    \:::\   \:::\    \      /:::/ |::|   |           /::::\   \:::\    \      /::::\   \:::\    \      /::::\    \              /::::\   \:::\    \        |::|   |        
  ___\:::\   \:::\    \    /:::/  |::|   | _____    /::::::\   \:::\    \    /::::::\   \:::\    \    /::::::\____\________    /::::::\   \:::\    \       |::|___|______  
 /\   \:::\   \:::\    \  /:::/   |::|   |/\    \  /:::/\:::\   \:::\    \  /:::/\:::\   \:::\    \  /:::/\:::::::::::\    \  /:::/\:::\   \:::\    \      /::::::::\    \ 
/::\   \:::\   \:::\____\/:: /    |::|   /::\____\/:::/__\:::\   \:::\____\/:::/  \:::\   \:::\____\/:::/  |:::::::::::\____\/:::/__\:::\   \:::\____\    /::::::::::\____\
\:::\   \:::\   \::/    /\::/    /|::|  /:::/    /\:::\   \:::\   \::/    /\::/    \:::\  /:::/    /\::/   |::|~~~|~~~~~     \:::\   \:::\   \::/    /   /:::/~~~~/~~      
 \:::\   \:::\   \/____/  \/____/ |::| /:::/    /  \:::\   \:::\   \/____/  \/____/ \:::\/:::/    /  \/____|::|   |           \:::\   \:::\   \/____/   /:::/    /         
  \:::\   \:::\    \              |::|/:::/    /    \:::\   \:::\    \               \::::::/    /         |::|   |            \:::\   \:::\    \      /:::/    /          
   \:::\   \:::\____\             |::::::/    /      \:::\   \:::\____\               \::::/    /          |::|   |             \:::\   \:::\____\    /:::/    /           
    \:::\  /:::/    /             |:::::/    /        \:::\   \::/    /               /:::/    /           |::|   |              \:::\   \::/    /    \::/    /            
     \:::\/:::/    /              |::::/    /          \:::\   \/____/               /:::/    /            |::|   |               \:::\   \/____/      \/____/             
      \::::::/    /               /:::/    /            \:::\    \                  /:::/    /             |::|   |                \:::\    \                              
       \::::/    /               /:::/    /              \:::\____\                /:::/    /              \::|   |                 \:::\____\                             
        \::/    /                \::/    /                \::/    /                \::/    /                \:|   |                  \::/    /                             
         \/____/                  \/____/                  \/____/                  \/____/                  \|___|                   \/____/                              
                                                                                                                                                                           

" "
 ▄▄▄       ███▄    █  ███▄    █  ██░ ██  ██▓ ██▓    ▄▄▄     ▄▄▄█████▓ ▒█████   ██▀███  
▒████▄     ██ ▀█   █  ██ ▀█   █ ▓██░ ██▒▓██▒▓██▒   ▒████▄   ▓  ██▒ ▓▒▒██▒  ██▒▓██ ▒ ██▒
▒██  ▀█▄  ▓██  ▀█ ██▒▓██  ▀█ ██▒▒██▀▀██░▒██▒▒██░   ▒██  ▀█▄ ▒ ▓██░ ▒░▒██░  ██▒▓██ ░▄█ ▒
░██▄▄▄▄██ ▓██▒  ▐▌██▒▓██▒  ▐▌██▒░▓█ ░██ ░██░▒██░   ░██▄▄▄▄██░ ▓██▓ ░ ▒██   ██░▒██▀▀█▄  
 ▓█   ▓██▒▒██░   ▓██░▒██░   ▓██░░▓█▒░██▓░██░░██████▒▓█   ▓██▒ ▒██▒ ░ ░ ████▓▒░░██▓ ▒██▒
 ▒▒   ▓▒█░░ ▒░   ▒ ▒ ░ ▒░   ▒ ▒  ▒ ░░▒░▒░▓  ░ ▒░▓  ░▒▒   ▓▒█░ ▒ ░░   ░ ▒░▒░▒░ ░ ▒▓ ░▒▓░
  ▒   ▒▒ ░░ ░░   ░ ▒░░ ░░   ░ ▒░ ▒ ░▒░ ░ ▒ ░░ ░ ▒  ░ ▒   ▒▒ ░   ░      ░ ▒ ▒░   ░▒ ░ ▒░
  ░   ▒      ░   ░ ░    ░   ░ ░  ░  ░░ ░ ▒ ░  ░ ░    ░   ▒    ░      ░ ░ ░ ▒    ░░   ░ 
      ░  ░         ░          ░  ░  ░  ░ ░      ░  ░     ░  ░            ░ ░     ░                                                                                            

" " 
            ,. -,               ,.         ,·´'; '                 _,.,  °                    ,.,   '                           _  °                 _,.,  °        ,-·-.          ,'´¨;    
       ,.·'´,    ,'\         ;'´*´ ,'\       ,'  ';'\°         ,.·'´  ,. ,  `;\ '                ;´   '· .,           ,.·,       :´¨   ;\           ,.·'´  ,. ,  `;\ '      ';   ';\      ,'´  ,':\'  
   ,·'´ .·´'´-·'´::::\'       ;    ';::\      ;  ;::'\       .´   ;´:::::\`'´ \'\              .´  .-,    ';\       ,'   ,'\     .'´ ,·´::'\        .´   ;´:::::\`'´ \'\       ;   ';:\   .'   ,'´::'\' 
  ;    ';:::\::\::;:'       ;      '\;'      ;  ;:::;      /   ,'::\::::::\:::\:'            /   /:\:';   ;:'\'     ;'  ,'::\ .·' .·´::::::;'      /   ,'::\::::::\:::\:'      '\   ';::;'´  ,'´::::;'  
  \·.    `·;:'-·'´         ,'  ,'`\   \      ;  ;:::;     ;   ;:;:-·'~^ª*';\'´            ,'  ,'::::'\';  ;::';     ;  ;::·´ .·´:::::::;·´      ;   ;:;:-·'~^ª*';\'´          \  '·:'  ,'´:::::;' '  
   \:`·.   '`·,  '         ;  ;::;'\  '\    ;  ;:::;      ;  ,.-·:*'´¨'`*´\::\ '       ,.-·'  '·~^*'´¨,  ';::;    ';  '´   ;´::::::;·´          ;  ,.-·:*'´¨'`*´\::\ '          '·,   ,'::::::;'´    
     `·:'`·,   \'         ;  ;:::;  '\  '\ ,'  ;:::;'     ;   ;\::::::::::::'\;'        ':,  ,·:²*´¨¯'`;  ;::';    ;  ;'\   '\::;·´             ;   ;\::::::::::::'\;'            ,'  /::::::;'  '    
      ,.'-:;'  ,·\       ,' ,'::;'     '\   ¨ ,'\::;'      ;  ;'_\_:;:: -·^*';\        ,'  / \::::::::';  ;::';   ;  ;:\:'·.  '·., ,.·';'        ;  ;'_\_:;:: -·^*';\          ,´  ';\::::;'  '      
 ,·'´     ,.·´:::'\      ;.'\::;        \`*´\::\; °     ';    ,  ,. -·:*'´:\:'\°     ,' ,'::::\·²*'´¨¯':,'\:;    ;_;::'\::`·._,.·'´:\'        ';    ,  ,. -·:*'´:\:'\°        \`*ª'´\\::/         
  \`*'´\::::::::;·'     \:::\'          '\:::\:' '        \`*´ ¯\:::::::::::\;' '    \`¨\:::/          \::\'    \::'\:;' '·::\::\:::::'\        \`*´ ¯\:::::::::::\;' '        '\:::::\';  '        
   \::::\:;:·´            \:'             `*´'            \:::::\;::-·^*'´          '\::\;'            '\;'  '   '\::\     `·'\::\;:·'´'          \:::::\;::-·^*'´               `*ª'´            
     '`*'´                                                  `*´¯                     `¨'                        ¯          ¯'                 `*´¯                          '               
" "
 .----------------.  .-----------------. .----------------.  .----------------.  .----------------.  .----------------.  .----------------. 
| .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. |
| |    _______   | || | ____  _____  | || |  _________   | || |      __      | || |  ___  ____   | || |  _________   | || |  ____  ____  | |
| |   /  ___  |  | || ||_   \|_   _| | || | |_   ___  |  | || |     /  \     | || | |_  ||_  _|  | || | |_   ___  |  | || | |_  _||_  _| | |
| |  |  (__ \_|  | || |  |   \ | |   | || |   | |_  \_|  | || |    / /\ \    | || |   | |_/ /    | || |   | |_  \_|  | || |   \ \  / /   | |
| |   '.___`-.   | || |  | |\ \| |   | || |   |  _|  _   | || |   / ____ \   | || |   |  __'.    | || |   |  _|  _   | || |    \ \/ /    | |
| |  |`\____) |  | || | _| |_\   |_  | || |  _| |___/ |  | || | _/ /    \ \_ | || |  _| |  \ \_  | || |  _| |___/ |  | || |    _|  |_    | |
| |  |_______.'  | || ||_____|\____| | || | |_________|  | || ||____|  |____|| || | |____||____| | || | |_________|  | || |   |______|   | |
| |              | || |              | || |              | || |              | || |              | || |              | || |              | |
| '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' |
 '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------' 
" "
                                                                                                                     
   d888888o.   b.             8 8 8888888888            .8.          8 8888     ,88' 8 8888888888 `8.`8888.      ,8' 
 .`8888:' `88. 888o.          8 8 8888                 .888.         8 8888    ,88'  8 8888        `8.`8888.    ,8'  
 8.`8888.   Y8 Y88888o.       8 8 8888                :88888.        8 8888   ,88'   8 8888         `8.`8888.  ,8'   
 `8.`8888.     .`Y888888o.    8 8 8888               . `88888.       8 8888  ,88'    8 8888          `8.`8888.,8'    
  `8.`8888.    8o. `Y888888o. 8 8 888888888888      .8. `88888.      8 8888 ,88'     8 888888888888   `8.`88888'     
   `8.`8888.   8`Y8o. `Y88888o8 8 8888             .8`8. `88888.     8 8888 88'      8 8888            `8. 8888      
    `8.`8888.  8   `Y8o. `Y8888 8 8888            .8' `8. `88888.    8 888888<       8 8888             `8 8888      
8b   `8.`8888. 8      `Y8o. `Y8 8 8888           .8'   `8. `88888.   8 8888 `Y8.     8 8888              8 8888      
`8b.  ;8.`8888 8         `Y8o.` 8 8888          .888888888. `88888.  8 8888   `Y8.   8 8888              8 8888      
 `Y8888P ,88P' 8            `Yo 8 888888888888 .8'       `8. `88888. 8 8888     `Y8. 8 888888888888      8 8888     
")



function printWelcome()
{
    len=$((${#heading[@]}-1))
    random=$(gshuf -i 0-$len -n 1)

    printf "%s" "${heading[$random]}"
}

# https://unix.stackexchange.com/a/429094
function printTable()
{
    local -r delimiter="${1}"
    local -r data="$(removeEmptyLines "${2}")"

    if [[ "${delimiter}" != '' && "$(isEmptyString "${data}")" = 'false' ]]
    then
        local -r numberOfLines="$(wc -l <<< "${data}")"

        if [[ "${numberOfLines}" -gt '0' ]]
        then
            local table=''
            local i=1

            for ((i = 1; i <= "${numberOfLines}"; i = i + 1))
            do
                local line=''
                line="$(sed "${i}q;d" <<< "${data}")"

                local numberOfColumns='0'
                numberOfColumns="$(awk -F "${delimiter}" '{print NF}' <<< "${line}")"

                # Add Line Delimiter

                if [[ "${i}" -eq '1' ]]
                then
                    table="${table}$(printf '%s#+' "$(repeatString '#+' "${numberOfColumns}")")"
                fi

                # Add Header Or Body

                table="${table}\n"

                local j=1

                for ((j = 1; j <= "${numberOfColumns}"; j = j + 1))
                do
                    table="${table}$(printf '#| %s' "$(cut -d "${delimiter}" -f "${j}" <<< "${line}")")"
                done

                table="${table}#|\n"

                # Add Line Delimiter

                if [[ "${i}" -eq '1' ]] || [[ "${numberOfLines}" -gt '1' && "${i}" -eq "${numberOfLines}" ]]
                then
                    table="${table}$(printf '%s#+' "$(repeatString '#+' "${numberOfColumns}")")"
                fi
            done
            if [[ "$(isEmptyString "${table}")" = 'false' ]]
            then
                echo -e "${table}" | column -s '#' -t | awk '/^\+/{gsub(" ", "-", $0)}1'
            fi
        fi
    fi
}

function removeEmptyLines()
{
    local -r content="${1}"

    echo -e "${content}" | sed '/^\s*$/d'
}

function repeatString()
{
    local -r string="${1}"
    local -r numberToRepeat="${2}"

    if [[ "${string}" != '' && "${numberToRepeat}" =~ ^[1-9][0-9]*$ ]]
    then
        local -r result="$(printf "%${numberToRepeat}s")"
        echo -e "${result// /${string}}"
    fi
}

function isEmptyString()
{
    local -r string="${1}"

    if [[ "$(trimString "${string}")" = '' ]]
    then
        echo 'true' && return 0
    fi

    echo 'false' && return 1
}

function trimString()
{
    local -r string="${1}"

    sed 's,^[[:blank:]]*,,' <<< "${string}" | sed 's,[[:blank:]]*$,,'
}

function _set()
{
    dic=$1
    var=$3
    val=$4
    
    if [ -z $var ] || [ -z $val ]; then
        echo 'Invalid usage of set. See help'
    else
        dic[$var]=$val
    fi    
}

function _get()
{
    # echo 'in get'
    dic=$1
    # echo $1
    printf "Current variable configuration in get.\n"
    printTable ',' "$(for i in "${!dic[@]}"; do printf "%s,%s\n" $i ${dic[$i]}; done)"
}
